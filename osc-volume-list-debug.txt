% openstack --debug --os-token gAAAAABi7N7p6cYezVbrC6boQg0IxKTBHoue_ARMCYZkHjmPeCAVl0f8-qtD3ekLZRerReRmbp-dP8VrxJEOYlBp8E_C_BgFfOkfjkGyo_InG2AqpBbFd6Vzi7ZWzeLLEvLJbFXqyhRkuH1vTT9ZyZrZbmlm19epGyLrwCT4CaYCCZdFYyIIVT8 --os-endpoint http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc volume list
START with options: --debug --os-token gAAAAABi7N7p6cYezVbrC6boQg0IxKTBHoue_ARMCYZkHjmPeCAVl0f8-qtD3ekLZRerReRmbp-dP8VrxJEOYlBp8E_C_BgFfOkfjkGyo_InG2AqpBbFd6Vzi7ZWzeLLEvLJbFXqyhRkuH1vTT9ZyZrZbmlm19epGyLrwCT4CaYCCZdFYyIIVT8 --os-endpoint http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc volume list
options: Namespace(access_key='', access_secret='***', access_token='***', access_token_endpoint='', access_token_type='', application_credential_id='', application_credential_name='', application_credential_secret='***', auth_methods='', auth_type='', auth_url='', cacert=None, cert='', client_id='', client_secret='***', cloud='', code='', consumer_key='', consumer_secret='***', debug=True, default_domain='default', default_domain_id='', default_domain_name='', deferred_help=False, discovery_endpoint='', domain_id='', domain_name='', endpoint='http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc', identity_provider='', insecure=None, interface='public', key='', log_file=None, openid_scope='', os_beta_command=False, os_compute_api_version='', os_identity_api_version='', os_image_api_version='', os_key_manager_api_version='1', os_network_api_version='', os_object_api_version='', os_project_id=None, os_project_name=None, os_volume_api_version='', passcode='', password='***', project_domain_id='', project_domain_name='', project_id='', project_name='', protocol='', redirect_uri='', region_name='', remote_project_domain_id='', remote_project_domain_name='', remote_project_id='', remote_project_name='', service_provider='', system_scope='', timing=False, token='***', trust_id='', user_domain_id='', user_domain_name='', user_id='', username='', verbose_level=3, verify=None)
Auth plugin admin_token selected
auth_config_hook(): {'api_timeout': None, 'verify': True, 'cacert': None, 'cert': None, 'key': None, 'baremetal_status_code_retries': '5', 'baremetal_introspection_status_code_retries': '5', 'image_status_code_retries': '5', 'disable_vendor_agent': {}, 'interface': 'public', 'floating_ip_source': 'neutron', 'image_api_use_tasks': False, 'image_format': 'qcow2', 'message': '', 'network_api_version': '2', 'object_store_api_version': '1', 'secgroup_source': 'neutron', 'status': 'active', 'auth': {'token': '***'}, 'verbose_level': 3, 'deferred_help': False, 'debug': True, 'default_domain': 'default', 'timing': False, 'endpoint': 'http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc', 'beta_command': False, 'key_manager_api_version': '1', 'region_name': '', 'auth_type': 'admin_token', 'networks': []}
defaults: {'api_timeout': None, 'verify': True, 'cacert': None, 'cert': None, 'key': None, 'auth_type': 'admin_token', 'baremetal_status_code_retries': 5, 'baremetal_introspection_status_code_retries': 5, 'image_status_code_retries': 5, 'disable_vendor_agent': {}, 'interface': None, 'floating_ip_source': 'neutron', 'image_api_use_tasks': False, 'image_format': 'qcow2', 'message': '', 'network_api_version': '2', 'object_store_api_version': '1', 'secgroup_source': 'neutron', 'status': 'active'}
cloud cfg: {'api_timeout': None, 'verify': True, 'cacert': None, 'cert': None, 'key': None, 'baremetal_status_code_retries': '5', 'baremetal_introspection_status_code_retries': '5', 'image_status_code_retries': '5', 'disable_vendor_agent': {}, 'interface': 'public', 'floating_ip_source': 'neutron', 'image_api_use_tasks': False, 'image_format': 'qcow2', 'message': '', 'network_api_version': '2', 'object_store_api_version': '1', 'secgroup_source': 'neutron', 'status': 'active', 'auth': {'token': '***'}, 'verbose_level': 3, 'deferred_help': False, 'debug': True, 'default_domain': 'default', 'timing': False, 'endpoint': 'http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc', 'beta_command': False, 'key_manager_api_version': '1', 'region_name': '', 'auth_type': 'admin_token', 'networks': []}
compute API version 2.1, cmd group openstack.compute.v2
identity API version 3, cmd group openstack.identity.v3
image API version 2, cmd group openstack.image.v2
network API version 2, cmd group openstack.network.v2
object_store API version 1, cmd group openstack.object_store.v1
volume API version 3, cmd group openstack.volume.v3
/usr/local/lib/python3.8/site-packages/barbicanclient/__init__.py:57: UserWarning: The secrets module is moved to barbicanclient/v1 directory, direct import of barbicanclient.secrets will be deprecated. Please import barbicanclient.v1.secrets instead.
  warnings.warn("The %s module is moved to barbicanclient/v1 "
key_manager API version 1, cmd group openstack.key_manager.v1
command: volume list -> openstackclient.volume.v2.volume.ListVolume (auth=True)
Auth plugin admin_token selected
auth_config_hook(): {'api_timeout': None, 'verify': True, 'cacert': None, 'cert': None, 'key': None, 'baremetal_status_code_retries': '5', 'baremetal_introspection_status_code_retries': '5', 'image_status_code_retries': '5', 'disable_vendor_agent': {}, 'interface': 'public', 'floating_ip_source': 'neutron', 'image_api_use_tasks': False, 'image_format': 'qcow2', 'message': '', 'network_api_version': '2', 'object_store_api_version': '1', 'secgroup_source': 'neutron', 'status': 'active', 'auth': {'token': '***'}, 'additional_user_agent': [('osc-lib', '2.4.2')], 'verbose_level': 3, 'deferred_help': False, 'debug': True, 'default_domain': 'default', 'timing': False, 'endpoint': 'http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc', 'beta_command': False, 'key_manager_api_version': '1', 'region_name': '', 'auth_type': 'admin_token', 'networks': []}
Using auth plugin: admin_token
Using parameters {'endpoint': 'http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc', 'token': '***'}
Get auth_ref
run(Namespace(all_projects=False, columns=[], fit_width=False, formatter='table', limit=None, long=False, marker=None, max_width=0, name=None, noindent=False, print_empty=False, project=None, project_domain=None, quote_mode='nonnumeric', sort_columns=[], sort_direction=None, status=None, user=None, user_domain=None))
Instantiating volume client: <class 'cinderclient.v3.client.Client'>
Instantiating compute client for API Version Major: 2, Minor: 1
Instantiating compute api: <class 'openstackclient.api.compute_v2.APIv2'>
Get auth_ref
Instantiating identity client: <class 'keystoneclient.v3.client.Client'>
REQ: curl -g -i -X GET http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc/servers/detail -H "Accept: application/json" -H "User-Agent: python-novaclient" -H "X-Auth-Token: {SHA256}124ba2da842fd87362b2a7a058a87964ebd380fe38d90cbfd32fedcfd131c7b7" -H "X-OpenStack-Nova-API-Version: 2.1"
Starting new HTTP connection (1): 125.6.40.85:80
http://125.6.40.85:80 "GET /volume/v3/e2568b7de48c49dd876100ec294a18cc/servers/detail HTTP/1.1" 404 112
RESP: [404] Connection: close Content-Length: 112 Content-Type: application/json Date: Fri, 05 Aug 2022 09:14:32 GMT Server: Apache/2.4.41 (Ubuntu) x-openstack-request-id: req-0278946a-0047-4344-b0b3-458def00f96b
RESP BODY: {"message": "The resource could not be found.<br /><br />\n\n\n", "code": "404 Not Found", "title": "Not Found"}
GET call to compute for http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc/servers/detail used request id req-0278946a-0047-4344-b0b3-458def00f96b
REQ: curl -g -i -X GET http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc/volumes/detail -H "Accept: application/json" -H "User-Agent: python-cinderclient" -H "X-Auth-Token: {SHA256}124ba2da842fd87362b2a7a058a87964ebd380fe38d90cbfd32fedcfd131c7b7"
Resetting dropped connection: 125.6.40.85
http://125.6.40.85:80 "GET /volume/v3/e2568b7de48c49dd876100ec294a18cc/volumes/detail HTTP/1.1" 200 1788
RESP: [200] Connection: close Content-Length: 1788 Content-Type: application/json Date: Fri, 05 Aug 2022 09:14:32 GMT OpenStack-API-Version: volume 3.0 Server: Apache/2.4.41 (Ubuntu) Vary: OpenStack-API-Version x-compute-request-id: req-9623a130-1780-4050-8fde-61121a03e7cf x-openstack-request-id: req-9623a130-1780-4050-8fde-61121a03e7cf
RESP BODY: {"volumes": [{"id": "3e867f4f-23b6-4c5a-bc98-f0b6e7c75b68", "status": "in-use", "size": 1, "availability_zone": "nova", "created_at": "2022-07-14T12:01:43.000000", "updated_at": "2022-07-14T12:01:56.000000", "name": "", "description": "", "volume_type": "lvmdriver-1", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc/volumes/3e867f4f-23b6-4c5a-bc98-f0b6e7c75b68"}, {"rel": "bookmark", "href": "http://125.6.40.85/volume/e2568b7de48c49dd876100ec294a18cc/volumes/3e867f4f-23b6-4c5a-bc98-f0b6e7c75b68"}], "user_id": "be301783726447d78f7eddc0276413c9", "bootable": "true", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [{"id": "3e867f4f-23b6-4c5a-bc98-f0b6e7c75b68", "attachment_id": "9f67ff9e-5362-4663-ab16-acb9d3095277", "volume_id": "3e867f4f-23b6-4c5a-bc98-f0b6e7c75b68", "server_id": "afc0de40-7c9d-4e11-a25b-ec9d241d1de0", "host_name": "key-devstack", "device": "/dev/vda", "attached_at": "2022-07-14T12:01:56.000000"}], "migration_status": null, "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null, "os-vol-tenant-attr:tenant_id": "e2568b7de48c49dd876100ec294a18cc", "os-vol-host-attr:host": "key-devstack@lvmdriver-1#lvmdriver-1", "volume_image_metadata": {"hw_rng_model": "virtio", "owner_specified.openstack.md5": "", "owner_specified.openstack.object": "images/cirros-0.5.2-x86_64-disk", "owner_specified.openstack.sha256": "", "image_id": "771fba1d-0cb1-42c6-8af7-6765d6bd7691", "image_name": "cirros-0.5.2-x86_64-disk", "checksum": "b874c39491a2377b8490f5f1e89761a4", "container_format": "bare", "disk_format": "qcow2", "min_disk": "0", "min_ram": "0", "size": "16300544"}}]}
GET call to volumev3 for http://125.6.40.85/volume/v3/e2568b7de48c49dd876100ec294a18cc/volumes/detail used request id req-9623a130-1780-4050-8fde-61121a03e7cf
+--------------------------------------+------+--------+------+---------------------------------------------------------------+
| ID                                   | Name | Status | Size | Attached to                                                   |
+--------------------------------------+------+--------+------+---------------------------------------------------------------+
| 3e867f4f-23b6-4c5a-bc98-f0b6e7c75b68 |      | in-use |    1 | Attached to afc0de40-7c9d-4e11-a25b-ec9d241d1de0 on /dev/vda  |
+--------------------------------------+------+--------+------+---------------------------------------------------------------+
clean_up ListVolume:
END return value: 0
